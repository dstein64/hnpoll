Some of the code in content.js is specifically so the code
works as a bookmarklet. For example, you remove existing bars
so that multiple bars are not created on a second click of the
bookmarklet.

You once had the following code:
    if (n.parentNode.childElementCount > 1)
        n.parentNode.replaceChild(bar, n.parentNode.childNodes[1]);
    else
        n.parentNode.appendChild(bar);
In commit 02a7669, you removed that code, as you weren't
sure why it was there. You just kept the appendChild.
You had this code for bookmarklet compatibility, but are now
using an alternative solution with a className.
(before you figured this out, you thought the replaceChild might be
 replacing a text node or something on some HN poll pages. it was
 actually replacing bar charts you already drew, so bookmarklets wouldn't
 draw multiples... this ultimately was problematic since HN changed
 its structure, so the replaceChild call was always called, even
 without existing bar charts).
 